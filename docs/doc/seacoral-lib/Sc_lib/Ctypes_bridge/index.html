<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"><head><title>Ctypes_bridge (seacoral-lib.Sc_lib.Ctypes_bridge)</title><meta charset="utf-8"/><link rel="stylesheet" href="../../../odoc.support/odoc.css"/><meta name="generator" content="odoc 2.4.2"/><meta name="viewport" content="width=device-width,initial-scale=1.0"/><script src="../../../odoc.support/highlight.pack.js"></script><script>hljs.initHighlightingOnLoad();</script></head><body class="odoc"><nav class="odoc-nav"><a href="../index.html">Up</a> â€“ <a href="../../index.html">seacoral-lib</a> &#x00BB; <a href="../index.html">Sc_lib</a> &#x00BB; Ctypes_bridge</nav><header class="odoc-preamble"><h1>Module <code><span>Sc_lib.Ctypes_bridge</span></code></h1><p>An interface for representing C values of any type.</p></header><nav class="odoc-toc"><ul><li><a href="#other-utilities-for-easy-access-to-ctypes">Other utilities for easy access to Ctypes</a></li><li><a href="#sets-and-maps-of-c-types">Sets and maps of C types</a></li></ul></nav><div class="odoc-content"><div class="odoc-spec"><div class="spec type anchored" id="type-cside"><a href="#type-cside" class="anchor"></a><code><span><span class="keyword">type</span> cside</span></code></div><div class="spec-doc"><p>Abstract type for any C-side value</p></div></div><div class="odoc-spec"><div class="spec type anchored" id="type-ctyp"><a href="#type-ctyp" class="anchor"></a><code><span><span class="keyword">type</span> <span>_ ctyp</span></span></code></div><div class="spec-doc"><p>Abstract representation of C types</p></div></div><div class="odoc-spec"><div class="spec type anchored" id="type-struct_"><a href="#type-struct_" class="anchor"></a><code><span><span class="keyword">type</span> struct_</span></code></div><div class="spec-doc"><p>Types of some C types</p></div></div><div class="odoc-spec"><div class="spec type anchored" id="type-union_"><a href="#type-union_" class="anchor"></a><code><span><span class="keyword">type</span> union_</span></code></div></div><div class="odoc-spec"><div class="spec type anchored" id="type-array_"><a href="#type-array_" class="anchor"></a><code><span><span class="keyword">type</span> array_</span></code></div></div><div class="odoc-spec"><div class="spec type anchored" id="type-ctyp_consumer"><a href="#type-ctyp_consumer" class="anchor"></a><code><span><span class="keyword">type</span> <span>'a ctyp_consumer</span></span><span> = </span><span>{</span></code><ol><li id="type-ctyp_consumer.f" class="def record field anchored"><a href="#type-ctyp_consumer.f" class="anchor"></a><code><span>f : 'k. <span><span><span class="type-var">'k</span> <span class="xref-unresolved">Ctypes</span>.typ</span> <span class="arrow">&#45;&gt;</span></span> <span class="type-var">'a</span>;</span></code></li></ol><code><span>}</span></code></div><div class="spec-doc"><p>Polymorphic function over internal C types</p></div></div><div class="odoc-spec"><div class="spec type anchored" id="type-typdecls"><a href="#type-typdecls" class="anchor"></a><code><span><span class="keyword">type</span> typdecls</span></code></div><div class="spec-doc"><p>Type of typing declarations for the naming and definition of composed types.</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-empty_typdecls"><a href="#val-empty_typdecls" class="anchor"></a><code><span><span class="keyword">val</span> empty_typdecls : <a href="#type-typdecls">typdecls</a></span></code></div><div class="spec-doc"><p>An immutable, empty set of type declarations.</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-typdecls_from_cil"><a href="#val-typdecls_from_cil" class="anchor"></a><code><span><span class="keyword">val</span> typdecls_from_cil : <span><span class="xref-unresolved">Cil</span>.file <span class="arrow">&#45;&gt;</span></span> <a href="#type-typdecls">typdecls</a></span></code></div><div class="spec-doc"><p><code>typdecls_from_cil cil</code> returns a set of typing declarations built from all global type definitions in <code>cil</code>.</p></div></div><div class="odoc-spec"><div class="spec type anchored" id="type-literal_binding"><a href="#type-literal_binding" class="anchor"></a><code><span><span class="keyword">type</span> literal_binding</span><span> = </span></code><ol><li id="type-literal_binding.LBStr" class="def variant constructor anchored"><a href="#type-literal_binding.LBStr" class="anchor"></a><code><span>| </span><span><span class="constructor">LBStr</span> <span class="keyword">of</span> string</span></code></li><li id="type-literal_binding.LBMap" class="def variant constructor anchored"><a href="#type-literal_binding.LBMap" class="anchor"></a><code><span>| </span><span><span class="constructor">LBMap</span> <span class="keyword">of</span> <span><a href="#type-literal_binding">literal_binding</a> <a href="../../../seacoral-basics/Basics/StrMap/index.html#type-t">Basics.StrMap.t</a></span></span></code></li><li id="type-literal_binding.LBArr" class="def variant constructor anchored"><a href="#type-literal_binding.LBArr" class="anchor"></a><code><span>| </span><span><span class="constructor">LBArr</span> <span class="keyword">of</span> <span><a href="#type-literal_binding">literal_binding</a> array</span></span></code></li><li id="type-literal_binding.LBLst" class="def variant constructor anchored"><a href="#type-literal_binding.LBLst" class="anchor"></a><code><span>| </span><span><span class="constructor">LBLst</span> <span class="keyword">of</span> <span><a href="#type-literal_binding">literal_binding</a> list</span></span></code></li><li id="type-literal_binding.LBNil" class="def variant constructor anchored"><a href="#type-literal_binding.LBNil" class="anchor"></a><code><span>| </span><span><span class="constructor">LBNil</span></span></code><div class="def-doc"><span class="comment-delim">(*</span><p>NULL reference</p><span class="comment-delim">*)</span></div></li><li id="type-literal_binding.LBRef" class="def variant constructor anchored"><a href="#type-literal_binding.LBRef" class="anchor"></a><code><span>| </span><span><span class="constructor">LBRef</span> <span class="keyword">of</span> <a href="#type-literal_binding">literal_binding</a></span></code><div class="def-doc"><span class="comment-delim">(*</span><p>reference to bindings</p><span class="comment-delim">*)</span></div></li></ol></div><div class="spec-doc"><p>Type of bindings to C values directly from C string literals; given to <a href="module-type-VAL/index.html#val-assign_from_literal"><code>VAL.assign_from_literal</code></a> below.</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-pp_literal_binding"><a href="#val-pp_literal_binding" class="anchor"></a><code><span><span class="keyword">val</span> pp_literal_binding : <span><a href="#type-literal_binding">literal_binding</a> <a href="../../../seacoral-basics/Basics/PPrt/index.html#type-pp">Basics.PPrt.pp</a></span></span></code></div><div class="spec-doc"><p>Prints raw literal bindings (for debug)</p></div></div><div class="odoc-spec"><div class="spec exception anchored" id="exception-UnexpectedLiteral"><a href="#exception-UnexpectedLiteral" class="anchor"></a><code><span><span class="keyword">exception</span> </span><span><span class="exception">UnexpectedLiteral</span> <span class="keyword">of</span> </span><span>{</span></code><ol><li id="module-Ctypes_bridge.binding" class="def record field anchored"><a href="#module-Ctypes_bridge.binding" class="anchor"></a><code><span>binding : <a href="#type-literal_binding">literal_binding</a>;</span></code></li><li id="module-Ctypes_bridge.assigned" class="def record field anchored"><a href="#module-Ctypes_bridge.assigned" class="anchor"></a><code><span>assigned : <span><span>(string * <span class="xref-unresolved">Ctypes_static</span>.boxed_typ)</span> option</span>;</span></code></li><li id="module-Ctypes_bridge.msg" class="def record field anchored"><a href="#module-Ctypes_bridge.msg" class="anchor"></a><code><span>msg : string;</span></code></li></ol><code><span>}</span></code></div><div class="spec-doc"><p>Exception raised in assignments with literal bindings</p></div></div><div class="odoc-spec"><div class="spec module-type anchored" id="module-type-ENCODING_PARAMS"><a href="#module-type-ENCODING_PARAMS" class="anchor"></a><code><span><span class="keyword">module</span> <span class="keyword">type</span> <a href="module-type-ENCODING_PARAMS/index.html">ENCODING_PARAMS</a></span><span> = <span class="keyword">sig</span> ... <span class="keyword">end</span></span></code></div><div class="spec-doc"><p>Parameters for binary encoding</p></div></div><div class="odoc-spec"><div class="spec module-type anchored" id="module-type-ENCODING"><a href="#module-type-ENCODING" class="anchor"></a><code><span><span class="keyword">module</span> <span class="keyword">type</span> <a href="module-type-ENCODING/index.html">ENCODING</a></span><span> = <span class="keyword">sig</span> ... <span class="keyword">end</span></span></code></div><div class="spec-doc"><p>High-level encoding specification. This only gathers parameters as no further details about the encoding should be exported.</p></div></div><div class="odoc-spec"><div class="spec module-type anchored" id="module-type-VALUE_PRINTER"><a href="#module-type-VALUE_PRINTER" class="anchor"></a><code><span><span class="keyword">module</span> <span class="keyword">type</span> <a href="module-type-VALUE_PRINTER/index.html">VALUE_PRINTER</a></span><span> = <span class="keyword">sig</span> ... <span class="keyword">end</span></span></code></div><div class="spec-doc"><p>The type of represented values, parameterized by encoding parameters.</p></div></div><div class="odoc-spec"><div class="spec module anchored" id="module-Printer"><a href="#module-Printer" class="anchor"></a><code><span><span class="keyword">module</span> <a href="Printer/index.html">Printer</a></span><span> : <span class="keyword">sig</span> ... <span class="keyword">end</span></span></code></div><div class="spec-doc"><p>Helpers to print C types and variable declarations</p></div></div><div class="odoc-spec"><div class="spec type anchored" id="type-ptr_attributes"><a href="#type-ptr_attributes" class="anchor"></a><code><span><span class="keyword">type</span> ptr_attributes</span><span> = </span><span>{</span></code><ol><li id="type-ptr_attributes.pv" class="def record field anchored"><a href="#type-ptr_attributes.pv" class="anchor"></a><code><span>pv : <a href="../C_concept/MemValidity/index.html#type-t">C_concept.MemValidity.t</a>;</span></code></li><li id="type-ptr_attributes.depth" class="def record field anchored"><a href="#type-ptr_attributes.depth" class="anchor"></a><code><span>depth : int;</span></code></li></ol><code><span>}</span></code></div><div class="spec-doc"><p>View of pointer attributes, exposed during structure traversals below</p></div></div><div class="odoc-spec"><div class="spec module anchored" id="module-Encoding"><a href="#module-Encoding" class="anchor"></a><code><span><span class="keyword">module</span> <a href="Encoding/index.html">Encoding</a></span><span> (<a href="Encoding/argument-1-Params/index.html">Params</a> : <a href="module-type-ENCODING_PARAMS/index.html">ENCODING_PARAMS</a>) : <span class="keyword">sig</span> ... <span class="keyword">end</span></span></code></div><div class="spec-doc"><p>Encoding-specific low-level routines</p></div></div><div class="odoc-spec"><div class="spec module-type anchored" id="module-type-VAL"><a href="#module-type-VAL" class="anchor"></a><code><span><span class="keyword">module</span> <span class="keyword">type</span> <a href="module-type-VAL/index.html">VAL</a></span><span> = <span class="keyword">sig</span> ... <span class="keyword">end</span></span></code></div><div class="spec-doc"><p>Encapsulated typed values</p></div></div><div class="odoc-spec"><div class="spec module-type anchored" id="module-type-REPR"><a href="#module-type-REPR" class="anchor"></a><code><span><span class="keyword">module</span> <span class="keyword">type</span> <a href="module-type-REPR/index.html">REPR</a></span><span> = <span class="keyword">sig</span> ... <span class="keyword">end</span></span></code></div><div class="spec-doc"><p>Representation of typed values that is parametric in encoding parameters</p></div></div><div class="odoc-spec"><div class="spec module-type anchored" id="module-type-AGGREG_TYP"><a href="#module-type-AGGREG_TYP" class="anchor"></a><code><span><span class="keyword">module</span> <span class="keyword">type</span> <a href="module-type-AGGREG_TYP/index.html">AGGREG_TYP</a></span><span> = <span class="keyword">sig</span> ... <span class="keyword">end</span></span></code></div><div class="spec-doc"><p>Representation of C composed types (structure, union, arrays). These can be used to interpret any sufficiently long OCaml character string as a memory representation of a value for such a type.</p></div></div><div class="odoc-spec"><div class="spec module-type anchored" id="module-type-NAMED_MAPPING"><a href="#module-type-NAMED_MAPPING" class="anchor"></a><code><span><span class="keyword">module</span> <span class="keyword">type</span> <a href="module-type-NAMED_MAPPING/index.html">NAMED_MAPPING</a></span><span> = <span class="keyword">sig</span> ... <span class="keyword">end</span></span></code></div><div class="spec-doc"><p>Representation of C structured types (structure or union). These can be built directly from a list of CIL field descriptions.</p></div></div><div class="odoc-spec"><div class="spec module anchored" id="module-Struct"><a href="#module-Struct" class="anchor"></a><code><span><span class="keyword">module</span> <a href="Struct/index.html">Struct</a></span><span> : <span class="keyword">sig</span> ... <span class="keyword">end</span></span></code></div><div class="spec-doc"><p>Declaration and representation of C struct types.</p></div></div><div class="odoc-spec"><div class="spec module anchored" id="module-Union"><a href="#module-Union" class="anchor"></a><code><span><span class="keyword">module</span> <a href="Union/index.html">Union</a></span><span> : 
  <a href="module-type-NAMED_MAPPING/index.html">NAMED_MAPPING</a> <span class="keyword">with</span> <span><span class="keyword">type</span> <a href="module-type-NAMED_MAPPING/index.html#type-value">value</a> = <span><a href="#type-cside">cside</a> <span class="xref-unresolved">Ctypes</span>.union</span></span> <span class="keyword">and</span> <span><span class="keyword">type</span> <a href="module-type-NAMED_MAPPING/index.html#type-typ">typ</a> = <span><a href="#type-union_">union_</a> <a href="#type-ctyp">ctyp</a></span></span></span></code></div><div class="spec-doc"><p>Declaration and representation of C unions.</p></div></div><div class="odoc-spec"><div class="spec module anchored" id="module-BoxedArray"><a href="#module-BoxedArray" class="anchor"></a><code><span><span class="keyword">module</span> <a href="BoxedArray/index.html">BoxedArray</a></span><span> : <span class="keyword">sig</span> ... <span class="keyword">end</span></span></code></div><div class="spec-doc"><p>Declaration and representation of C arrays.</p></div></div><h3 id="other-utilities-for-easy-access-to-ctypes"><a href="#other-utilities-for-easy-access-to-ctypes" class="anchor"></a>Other utilities for easy access to Ctypes</h3><div class="odoc-spec"><div class="spec value anchored" id="val-has_pointers"><a href="#val-has_pointers" class="anchor"></a><code><span><span class="keyword">val</span> has_pointers : <span><span><span class="type-var">'k</span> <span class="xref-unresolved">Ctypes</span>.typ</span> <span class="arrow">&#45;&gt;</span></span> bool</span></code></div><div class="spec-doc"><p><code>has_pointers t</code> is true iff the C type <code>t</code> is composed of at least one pointer field.</p></div></div><h3 id="sets-and-maps-of-c-types"><a href="#sets-and-maps-of-c-types" class="anchor"></a>Sets and maps of C types</h3><div class="odoc-spec"><div class="spec module anchored" id="module-CTypID"><a href="#module-CTypID" class="anchor"></a><code><span><span class="keyword">module</span> <a href="CTypID/index.html">CTypID</a></span><span> : <span class="keyword">sig</span> ... <span class="keyword">end</span></span></code></div></div><div class="odoc-spec"><div class="spec module anchored" id="module-CTyps"><a href="#module-CTyps" class="anchor"></a><code><span><span class="keyword">module</span> <a href="CTyps/index.html">CTyps</a></span><span> : <a href="../../../seacoral-basics/Basics/module-type-SET/index.html">Basics.SET</a> <span class="keyword">with</span> <span><span class="keyword">type</span> <a href="../../../seacoral-basics/Basics/module-type-SET/index.html#type-elt">elt</a> = <a href="CTypID/index.html#type-t">CTypID.t</a></span></span></code></div></div><div class="odoc-spec"><div class="spec module anchored" id="module-CTypMap"><a href="#module-CTypMap" class="anchor"></a><code><span><span class="keyword">module</span> <a href="CTypMap/index.html">CTypMap</a></span><span> : <a href="../../../seacoral-basics/Basics/module-type-MAP/index.html">Basics.MAP</a> <span class="keyword">with</span> <span><span class="keyword">type</span> <a href="../../../seacoral-basics/Basics/module-type-MAP/index.html#type-key">key</a> = <a href="CTypID/index.html#type-t">CTypID.t</a></span></span></code></div></div></div></body></html>

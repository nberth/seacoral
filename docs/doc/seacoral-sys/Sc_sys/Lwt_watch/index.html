<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"><head><title>Lwt_watch (seacoral-sys.Sc_sys.Lwt_watch)</title><meta charset="utf-8"/><link rel="stylesheet" href="../../../odoc.support/odoc.css"/><meta name="generator" content="odoc 2.4.2"/><meta name="viewport" content="width=device-width,initial-scale=1.0"/><script src="../../../odoc.support/highlight.pack.js"></script><script>hljs.initHighlightingOnLoad();</script></head><body class="odoc"><nav class="odoc-nav"><a href="../index.html">Up</a> â€“ <a href="../../index.html">seacoral-sys</a> &#x00BB; <a href="../index.html">Sc_sys</a> &#x00BB; Lwt_watch</nav><header class="odoc-preamble"><h1>Module <code><span>Sc_sys.Lwt_watch</span></code></h1></header><div class="odoc-content"><div class="odoc-spec"><div class="spec value anchored" id="val-waitfor"><a href="#val-waitfor" class="anchor"></a><code><span><span class="keyword">val</span> waitfor : <span><span class="optlabel">?inot</span>:<span class="xref-unresolved">Lwt_inotify</span>.t <span class="arrow">&#45;&gt;</span></span> <span><span><span class="type-var">_</span> <a href="../File/index.html#type-t">File.t</a></span> <span class="arrow">&#45;&gt;</span></span> <span>unit <span class="xref-unresolved">Lwt</span>.t</span></span></code></div><div class="spec-doc"><p><code>waitfor ~inot file</code> promises to terminate whenever the directory entry (file or directory) <code>file</code> exists. Reuses the inotify descriptor <code>inot</code>, if provided.</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-monitor_dir"><a href="#val-monitor_dir" class="anchor"></a><code><span><span class="keyword">val</span> monitor_dir : 
  <span><span class="label">on_close</span>:<span>(<span><span><span class="type-var">_</span> <a href="../File/index.html#type-t">File.t</a></span> <span class="arrow">&#45;&gt;</span></span> <span>unit <span class="xref-unresolved">Lwt</span>.t</span>)</span> <span class="arrow">&#45;&gt;</span></span>
  <span><a href="../File/index.html#type-dir">File.dir</a> <span class="arrow">&#45;&gt;</span></span>
  <span><span>(<span>unit <span class="arrow">&#45;&gt;</span></span> <span>unit <span class="xref-unresolved">Lwt</span>.t</span>)</span> <span class="xref-unresolved">Lwt</span>.t</span></span></code></div><div class="spec-doc"><p><code>monitor_dir ~on_close dirname</code> asynchronously monitors file creations or modifications in directory <code>dirname</code>, and calls <code>on_close</code> with the name <code>f</code> of any such file after it has been closed.</p><p>This function awaits for the creation of <code>dirname</code> if it does not exist upon call. Note, thought, that if such is the case then that the monitoring cannot start right at the time the directory is created: for this reason, one cannot guarantee that every event triggers a call to <code>on_close</code> in this case. This limitation does not apply in case <code>dirname</code> already exists upon call.</p><p>Fails with <a href="../File/index.html#exception-MISSING"><code>File.MISSING</code></a> if <code>dir</code> is not, or does not end up being, a directory.</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-monitor_file"><a href="#val-monitor_file" class="anchor"></a><code><span><span class="keyword">val</span> monitor_file : 
  <span><span class="label">on_close</span>:<span>(<span><span><span class="type-var">'a</span> <a href="../File/index.html#type-t">File.t</a></span> <span class="arrow">&#45;&gt;</span></span> <span>unit <span class="xref-unresolved">Lwt</span>.t</span>)</span> <span class="arrow">&#45;&gt;</span></span>
  <span><span><span class="type-var">'a</span> <a href="../File/index.html#type-t">File.t</a></span> <span class="arrow">&#45;&gt;</span></span>
  <span><span>(<span>unit <span class="arrow">&#45;&gt;</span></span> <span>unit <span class="xref-unresolved">Lwt</span>.t</span>)</span> <span class="xref-unresolved">Lwt</span>.t</span></span></code></div></div></div></body></html>
